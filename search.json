[{"title":"240621_LOG","url":"/2024/06/21/240621_LOG/","content":"\n      \n        74e7c5095cdbf115d919a7719aed9489b146a2731afc0ed31825ad6e90be4c67d955e652df1fe7b1312637e1c1217a8a04e14d666569ad8a435e15f42d6a5b21edaa7d7bf79e4153bda35ae05da601f627a80e34365cbde377fd041f5e42e77616b343f4cbc942235acd88991b30e83f9fecbf70eff743f72b1188e2a688e422a3706244aa18e9bf284ae4bd613a45399ca3954223441f1c72555fb71a7288131a37efc1c1c6e304bf0fedd7347937c17faae52e45fb33c058d69368cd829b0d49351c4857667ac9ee2e37dc2d6a50bff3e169a580459ee0034449bb61b2fc4f3eebdba1ab5868a4d7899890b7a7cb18c71b4528c884221586b9bb6c7a58b72ffa0e6ef2f0cbcab28c3c5b9b72fc5d0a2bfb1f5c0f2ab87d71a48a2db00bcceee5f9156cdaa34523b8126b7b94b9e8068c51eaa36a17a4c05d01a11459ab4697e25e6da0f9aed303f12b8f635047f4eb1fb8fd9974fc8772afaa8eb1d9c4314865ac7defaaa9fb41134a2cac1f04a54519796496d15ad47f3ec7b80ccc75c73a72e5bf7edde8347d8178c05604fbf6db501a45f7248f81f68763971024cf8e1f2374599c3ef7b18915e286dcb8290b982d3d0e61f54f9cff2fa5e992e48802bf9da7f4507ce4efc69d4852cac8fcdb99be91d8a859f91af2c87d9bc31943abb7133b2aaf03c9ef6f61e4444c7cd061d3d4227dd8bbd74e482c34401dafd66c0d699075e80e1492ff180ee99d4b19a358e18f3f36214520c424fc1469ba00e4ce3f2a98a00fe0c5f246fcb60e994456cc57f152695067ec774a3dbecf00b5b7b1eed57678f5c96339bd086b09eeb39d32ba221478583382ee26a180f16dc9f23bf7f60db09e81106965e77bdf70f4d9a0f4acfd4a18d3b6ba604209ad25fb60ac59287c8b5958a014766b739c8af365f8313a3cfaa3b31172062de21033b134547b0c2b0e3766f77243dbf276e1aeb79e052747025b0b605acc765b96525f54f5150b61367e499aa3734d4fbab23da7d50cacc1e142896cff78991eb0d603670fdfd96f73950be0dd4f03a4804d5deca46a2230ff3e395cab546423f78ca4065a69a849638229d2ad570222c49f0dbd7ad8d24ddc21aff8c901a804c6718370f26319590792d2b19fea265f6efa4c92483d2901d1159dcc24cf7c5b0d083583101127e6ef760fa262768a276340911dd9666984fb03f8843b66dfbc3430e5fd7e6b09ccbf3028ff8c02f9dc04bc547239d8faa4f73528c9290f9f4766eac1e55c334e530f4c54c4d5d52109fef0fd88ea54b7b38a9c53dead0428d5e2f13db58adb96ec39bf19022487d59d9cea670b343af29fd9ceff8d13a9a691cd16c6e11aef739f98445eccc748fd1682e80591ab9dc9e86cebae105895dc45bce6ba0158caab8451fd9c3b0d03f3b5b0cdc925fa5cc3716921931921d07647e854e5c1e58b85f313a5545b6f4747a39f895d5f7dc7f3745fac72bc06ce24aa8ec291d435fdef07f6dfe10a5f6782198bcddd5113c4c1023caff38be707f0bcf4a0cc2c1c79df13bb8692e4489550d385e754c19bb0a2c0981789baed3b2fa4abcd57be9f4304f68fb3be1d29e0047522eafe8330113960fbbd90de43867a1ac338e153aefa5e41f5532b5bf0316370155afffcf0ea76b38886176e404d5e49b8eebe3abf0bf4ce1e27bd103493a794c5d8146ecf4cca99e7bb56c1cbeb417320b0a220565edacd0f2e6cd64b28111b21355f97cfb36e363f86c111b2e0d5262824c7f9a3e2c5a8acf2bdbbe5224baed6f93f1371a6ead656bfe196fc1ddaa239ad3d2f21ca7ebf760943e2406f90419cd0e450af75a647ccf4c632c6d28a22166b3b96ac1a7458930619aca8ddef6b6e85a8ddf09f47c664bfa161a028fb8b834cf1f07e4b958612c7cfd430242b2859de979cb4232e400b2df195a83aa85b6afa7b7527673b2f6d404df837707e5c593a649646239ce5c8c53104fa88edd1b9358ddba130498a0b739220a143efeba74e5ea748ed6b964471cb4cb8db30f8abdaa979ed38eb0a459603f791147fd580393903aa8e70a03da39dc25543308549038ace685f22c04952a2055ebaf9359841418ebd27c6018d65d45ba31ea55bf72ab91da98a34f153e9b9c1d15a4e1cd656671eaf3a54fc717cf0003e324df0c5c52800e8e79500760e24ebc6c5e333aa7d0920efa2b63375789eaf88d8ea8d8be20ad30ca4bb9c4af0cf0682ff531b247437a53218d958f39acf0fec1ac94dc499566efb43f7b555306f55717ad7fcc62607580694c4a0d1647132da21d91b470d9a435f0df0f077ad3c3c85be3534c58cbbe973a10340eedccacf736333b7561e709140cd29acfac2cf5f1a0fcb75d835fa25f5c3dd13b80ff0671ab207b1e528ddc9b2fd1955be210a0a51129510b4d1ea4f875ed2a96c03a94cc617f3a53e07bddba8d891e28289141fcca14100b1cf7a33ad60ffd259db98c7012a51221cfb5f2df32432bbe7d27b1cdf413103efa3294f6092392b682240af40cc2617a28206b57136ef96e3ff6c014ed1a8f86da8dddda1bbbbc2b33a0aca8ab891e073f03be099ab9caf2c364572b45fd34e2944fda0c280d9d0b9e943c5141cb07e1b05f8c83b01be9d1366a576a295db642465112e3e628364910c112157ee85583b6c2b4a4b111e2d50d83cef8c300e0c6f5f9d4c909e9d22c1b9c5fb0b9bb446612276d05f7ba7a91aa448770eb353fcb3590fb4f98480ec9c4c0f28d8023d89730e18cd74db0cb05d9f4031dee94037d3a6e417b0b23568113c1d8ebd5cfcc4e100e5440419d52e3b0be724f721db233369ca2ed2bc07294c900ad920efdd44cf76ab0259c7ed2c3336f8b9bb7f3b3743510b85924632a1420833dd67d6e7470192bc2aabdc441ea32ebf942d54137368a52a204830b97e7bc75c48a30c625f139eb9ed41cd2230fc7d1f2a3f44a7109698c1eb85d557f2660e9efe8820ad1eb402148010a6057a6072ab02a9422cba7cc1e339c88188efa53c6d13a090c9965fcf9f2d118ae1c1b4a73a5f32bc86a29fd650768649d1110077cdf85e1707afd777c2633ee71f7269297f963d47f10b5aa48987fa0c0cf6f901665092843c8984928ea60113c9954e5899c8fb48be8155aeff2f7834d48da067d93d607a803cf08619146d36574d46348b087a7a5b7bef61d9136ec357ff6da8581f03fbdbff5c56e24bff4ad848c624cfa4ff07d27c96584e725015f937dd9e4ef91c60696b1f4c68f5b1b09ba24a4d2f94d44d4e44ca3beed41c5607a5b3f79be257500188c411036227be7d309f7e111d50095a237ea76843300da577ed8910e5dac2aee12a478504b4ebecea836458f51f77312efe28f91826770ea29bfff75baeaeccc155519f30c93d6d2a4344a1490749e476c16ed6ba72737b46f5bbb729176ff474d5951e69e115dfe529ed6f75094f551801a3dbda0703347621e2b02d161c70d8dc77a40e45174df6d52bef946dbc6d8838869116323609fd37f2f586b46f7df271fd44937c1512679c87646158048ab9f6f93a7809534c2a3da216e855de01c2e1380f559d6affdd8ffc863444868d49dc109d1ad4cf289623fb1f0e13273a35aa11887a4c46155286eabed046ccc9de91bd6dfe125ed0b9a5ba7794a8ffc3291a8fe5ba3b090db4cf8890f1ae02dd1e7d67b21da3746098704fad60e3de23285576455eeb81fcde4adf19484f307a5fc4b1a47f517d8af486261863677da240af5bfb0d0e2e56030c43c725a0f3065226a19b43fc13d3577ec48efaa87974b27cda161ed1024acf3a03fdea20902928a5aaf7599cf84b572a50bd0d0b09f0c8a798e1d3f83c7aa96f6b402bbfe01118bdda874d013f9cfee86e909e1bc8a2d1f21a92e20ed673077b1f09e2750f175d3a40c9bf028275015ac8fcd30d00438bf047a5a4c98400f544bc16e6118d012308ced30b1d00c0d342e0581509a1d192e277213747fd2140aec6c16d356289319424b962558117f756eb834b1a262608e15be2b4f96194a27d617b75b122077e87d05df7dd17277deda100a42cc1e0fa216b15e0eaeaeb8ed760bed25f4114f2bf2d697734\n      \n      \n        \n          \n          \n            PASSWORD\n          \n        \n        \n      \n    \n    ","categories":["Research","B_N__SGDD"],"tags":["technical_report"]},{"title":"BdNMC Code review_test_post","url":"/2024/07/13/BdNMC%20Code%20review_pasta/","content":"\nmain.cppLine 57-63, time_delay_fractiondouble t_delay_fraction(double tcut, double pos, double speed) &#123;      double tdelay = pos / speed / speed_of_light - pos / speed_of_light;      if (tdelay &gt; tcut)          return 1;      else          return 1 - (tcut - tdelay) / tcut;  &#125;\nLine 65-166, parameter card error check and read the pre-simulation setting.Line 65-124, parameter card error check.Line 127-130, Random seed initif (par-&gt;Seed() &gt;= 0)      Random(par-&gt;Seed());  else      Random();\n\nrandom seed 가 제공되면 그걸로 initialize,\n없는 경우는 그냥 랜덤하게 하나 지정\n\nLine 134, [[1609.01770.pdf#page=22&amp;selection=55,0,55,10|Timing cut]]\ntime delay 와 관련된 부분\n\nLine 136-166, parameter card readLine 136-143, output &amp; summary file location and nameLine 146-151, signal channel, signal particleLine 153-164, output mode definestring outmode;  std::unique_ptr &lt;std::ofstream&gt; comprehensive_out;//if((outmode=par-&gt;Output_Mode())==&quot;summary&quot;)  if ((outmode = par-&gt;Output_Mode()) == &quot;comprehensive&quot; || outmode == &quot;dm_detector_distribution&quot;) &#123;      comprehensive_out = std::unique_ptr&lt;std::ofstream&gt;(new std::ofstream(output_filename));      if (!comprehensive_out-&gt;is_open()) &#123;          cout &lt;&lt; &quot;Unable to open output file: &quot; &lt;&lt; output_filename &lt;&lt; endl;          parstream.close();          return -1;      &#125;&#125;\nLine 168-275, Run parameter, Detector setup, Production mode\n여기까진 pMax  가 나오지 않았다.\n\n","categories":["B_N__SGDD"]},{"title":"Blog_init","url":"/2024/06/21/Blog-init/","content":"RHINE-LAB-KR\n","categories":["Announcement"]},{"title":"Ubutnu 24.04 에 GENIE 설치하기 (24 년 09 월 기준)","url":"/2025/06/03/GENIE%20install%20instruction/","content":"\n본 글에선 중성미자 입자 생성 시뮬레이션 프로그램 GENIE 의 설치 과정에 대해 기술한다. 맨 하단에 이 과정을 전부 실행하는 스크립트가 있으니 급하면 해당 스크립트를 사용하라.\n의존성 패키지를 많이 끌고오는 프로그램이므로 Ubuntu, GENIE, 의존성 패키지 셋의 버전에 따라서 해당 방법으로 설치가 되지 않을 수도 있다.\n사용된 ubuntu, GENIE, 의존성 패키지들의 버전은 다음과 같다.\nubuntu : 24.04 or 22.04\nGENIE : R-3_04_02\nlibxml2 : 위에 기술한 ubuntu 의 apt 에서 설치\nLHAPDF : 6.5.4\nlog4cpp : 1.1.5rc1\npythia : 6.4.16, 6.4.28, 8 버전을 셋 다 사용. 이유는 2.4. 에서 후술한다.\nGSL : 2.8\nROOT : 6.30.08\n\n\n\n2024/09/11/ docker container ubuntu 24.04 를 베이스로 한다.2024/09/12/ docker container ubuntu 22.04 에서 동작 확인\n\n가능하면 make install 단계에서는 -j 옵션을 사용하지 마라\n\nPrerequisite apt installapt 에서 설치해야 하는 항목\n필수 설치\nbinutils\ncmake\ngcc\ngfortran\ngit\ng++\nlibgif-dev\nlibgsl-dev\nlibnsl-dev\nlibssl-dev\nlibtbb-dev\nlibx11-dev\nlibxext-dev\nlibxft-dev\nlibxml2-dev\nlibxpm-dev\nlocales\npython3\nrsync\nwget\nxorg\n\nIntegrated commandapt 설치apt update &amp;&amp; \\apt install -y binutils cmake gcc gfortran git g++ libgif-dev libgsl-dev libnsl-dev libssl-dev libtbb-dev libx11-dev libxext-dev libxft-dev libxml2-dev libxpm-dev locales make python3 rsync wget xorg\n로케일 설정locale-gen en_US.UTF-8\nDependency 설치LIBXML2apt 에서 설치됨. Section 1.1., 1.2. 참조\nLHAPDF - Version 6.5.4내려받기 및 압축 해제cd /rootmkdir /root/lhapdfwget https://lhapdf.hepforge.org/downloads/LHAPDF-6.5.4.tar.gztar xvf LHAPDF-6.5.4.tar.gzcd /root/LHAPDF-6.5.4\n빌드 및 정리\npython 을 disable 하고 받아야 문제가 없다.\n\n./configure \\\t--prefix=/root/lhapdf \\\t--disable-pythonmake -j N # N 은 장비의 스레드 개수make installcd /rootrm -rf LHAPDF*\nLHAPDF integrated commandcd /root &amp;&amp; \\mkdir /root/lhapdf &amp;&amp; \\wget https://lhapdf.hepforge.org/downloads/LHAPDF-6.5.4.tar.gz &amp;&amp; \\tar xvf LHAPDF-6.5.4.tar.gz &amp;&amp; \\cd /root/LHAPDF-6.5.4 &amp;&amp; \\./configure \\\t--prefix=/root/lhapdf \\\t--disable-python &amp;&amp; \\make -j 100 &amp;&amp; \\ # N = 100 인 경우make install &amp;&amp; \\cd /root &amp;&amp; \\rm -rf LHAPDF*\nlog4cpp - Version 1.1.5rc1내려받기 및 압축 해제mkdir /root/log4cppmkdir /root/log4cpp_srccd /rootwget &#x27;https://sourceforge.net/projects/log4cpp/files/log4cpp-1.1.x (new)/log4cpp-1.1/log4cpp-1.1.5rc1.tar.gz&#x27;tar -xvf log4cpp-1.1.5rc1.tar.gz -C /root/log4cpp_src --strip-components=2\n빌드 및 정리cd log4cpp_src./configure --prefix=/root/log4cppmake -j N # N 은 장비의 스레드 개수make installcd /rootrm -rf log4cpp_* log4cpp-*\nlog4cpp integrated commandmkdir /root/log4cpp &amp;&amp; \\mkdir /root/log4cpp_src &amp;&amp; \\cd /root &amp;&amp; \\wget &#x27;https://sourceforge.net/projects/log4cpp/files/log4cpp-1.1.x (new)/log4cpp-1.1/log4cpp-1.1.5rc1.tar.gz&#x27; &amp;&amp; \\tar -xvf log4cpp-1.1.5rc1.tar.gz -C /root/log4cpp_src --strip-components=2 &amp;&amp; \\cd log4cpp_src &amp;&amp; \\./configure --prefix=/root/log4cpp &amp;&amp; \\make -j 100 &amp;&amp; \\make install &amp;&amp; \\cd /root &amp;&amp; \\rm -rf log4cpp_* log4cpp-*\nPYTHIA6 - Version 6.4.28내려받기 및 압축해제 및 전처리Pythia6 의 경우, 빌드 시 dependency 가 되는 것을 담아놓은 pythia6 폴더와, 각 minor version  에 따른 실제 골자가 되는 .f 파일이 따로 배포된다.본 글에서 사용하는 pythia6 폴더에는 기본적으로 6.4.16 의 .f 파일이 들어가 있는데, 이를 pythia6 의 최종 패치 버전인 6.4.28 의 .f 파일을 사용할 것이다. Root 만 설치할 경우, Pythia6 은 필요하지 않고 심지어는 현행 Root 버전에선 removal 되어 사용하지 않는 것이 옳다.하지만 GENIE 의 최신 버전에서는 Pythia6 의 라이브러리 경로와 Pythia6 을 베이스로 빌드한 Root 에서 생성된 파일을 dependency 로 사용하고 있기 때문에 GENIE 의 설치에는 Pythia6 의 올바른 설치가 상당히 중요하다. \n# pythia6 다운로드 및 압축 해제wget https://root.cern.ch/download/pythia6.tar.gztar zxvf pythia6.tar.gz# pythia 6.4.28 의 fortran 코드 다운로드 및 6.4.16 의 fortran 코드 대체wget https://www.pythia.org/download/pythia6/pythia6428.fmv pythia6428.f pythia6/pythia6428.frm pythia6/pythia6416.fcd /root/pythia6\n이 상태에서 빌드하면 몇 개의 변수가 빌드 과정에서 다른 값으로 중복 정의되는 문제가 있다.이는 fortran 으로 작성된 코드를 c 로 변환하는 과정에서 생기는 문제로 보인다.실제로 Pythia6 의 매뉴얼에서는 이를 피하기 위해 external 처리해야하는 변수의 종류를 소개하고 있다.\npythia6_common_address.c 파일을 열어52-60, 62, 64 - 65, 69, 72 번째 줄의 맨 앞에 extern 이라는 조건을 추가해야 한다.다음의 명령어를 사용하면 된다.\nsed -i &#x27;52,60s/^/extern /;62s/^/extern /;64,65s/^/extern /;69s/^/extern /;72s/^/extern /&#x27; /root/pythia6/pythia6_common_address.c\n검토해보고 싶다면 파일을 들어갔을 때 다음과 같이 수정되어있으면 된다.\n\n빌드 및 정리./makePythia6.linuxx8664 -j N  # N 은 장비의 스레드 개수# 정리 단계cd /rootrm pythia6.tar.gz\nPYTHIA6 integrated commandwget https://root.cern.ch/download/pythia6.tar.gz &amp;&amp; \\tar zxvf pythia6.tar.gz &amp;&amp; \\wget https://www.pythia.org/download/pythia6/pythia6428.f &amp;&amp; \\mv pythia6428.f pythia6/pythia6428.f &amp;&amp; \\rm pythia6/pythia6416.f &amp;&amp; \\cd /root/pythia6 &amp;&amp; \\sed -i &#x27;52,60s/^/extern /;62s/^/extern /;64,65s/^/extern /;69s/^/extern /;72s/^/extern /&#x27; /root/pythia6/pythia6_common_address.c &amp;&amp; \\./makePythia6.linuxx8664 -j 100 &amp;&amp; \\cd /root &amp;&amp; \\rm pythia6.tar.gz\nPYTHIA8 - Version 8.3.12 (option for root)Pythia8 은 root 에만 들어가는 옵션이고, GENIE 에서도 Pythia8 을 옵션으로 달 수 있지만 현재는 에러를 해결하지 못해서 GENIE 에서 enable 옵션은 사용하지 않았다.\n내려받기 및 압축해제wget https://www.pythia.org/download/pythia83/pythia8312.tgzmkdir /root/pythia8tar xvf pythia8312.tgzcd /root/pythia8312\n빌드 및 정리./configure --prefix=/root/pythia8make -j N # N 은 장비의 스레드 개수make installcd /rootrm -rf pythia8312*\nPYTHIA8 integrated commandwget https://www.pythia.org/download/pythia83/pythia8312.tgz &amp;&amp; \\mkdir /root/pythia8 &amp;&amp; \\tar xvf pythia8312.tgz &amp;&amp; \\cd /root/pythia8312 &amp;&amp; \\./configure --prefix=/root/pythia8 &amp;&amp; \\make -j 100 &amp;&amp; \\make install &amp;&amp; \\cd /root &amp;&amp; \\rm -rf pythia8312*\nGSL - Version 2.8내려받기 및 압축 해제mkdir /root/gslwget https://mirror.ibcp.fr/pub/gnu/gsl/gsl-latest.tar.gztar xvf gsl-latest.tar.gzcd /root/gsl-2.8\n빌드 및 정리./configure --prefix=/root/gslmake -j N # N 은 장비의 스레드 수make installcd /rootrm -rf gsl-2.8 gsl-latest.tar.gz\nGSL integrated commandmkdir /root/gsl &amp;&amp; \\wget https://mirror.ibcp.fr/pub/gnu/gsl/gsl-latest.tar.gz &amp;&amp; \\tar xvf gsl-latest.tar.gz &amp;&amp; \\cd /root/gsl-2.8 &amp;&amp; \\./configure --prefix=/root/gsl &amp;&amp; \\make -j 100 &amp;&amp; \\make install &amp;&amp; \\cd /root &amp;&amp; \\rm -rf gsl-2.8 gsl-latest.tar.gz\nROOT - Version 6.30.08GENIE 는 pythia6 의존성이 필요한데, 특히 root 에서 EGPythia6 를 불러오는데 이를 ROOT 최신버전에선 지원하지 아니함.ROOT 에서 PYTHIA6 가 deprecate 되는 시점이 6.30, 완전히 removal 되는 시점이 6.32 이다.따라서 2024/09/11 기준 PYTHIA6 를 지원하며 가장 최근까지 패치가 진행되었던 ROOT 6.30.08 버전을 사용한다.\n내려받기, 압축 해제 및 디렉토리 준비cd /rootmkdir root_build &amp;&amp; mkdir root_install # root 는 반드시 빌드 위치가 src 파일 위치와는 달라야 함.git clone https://github.com/root-project/root.git root_srccd root_srcgit checkout v6-30-08cd /root/root_build\n빌드 및 정리cmake \\\t-DCMAKE_INSTALL_PREFIX=/root/root_install \\ # 설치 위치\t-DPYTHIA6_LIBRARY=/root/pythia6/libPythia6.so \\ # pythia6 라이브러리 위치 (필수사항)\t-DPYTHIA8_INCLUDE_DIR=/root/pythia8/include \\ # pythia8 헤더파일 위치 (선택사항1)\t-DPYTHIA8_LIBRARY=/root/pythia8/lib/libpythia8.so \\ # pythia8 라이브러리 위치 (선택사항1)\t-DGSL_DIR=/usr/local \\ # GSL 위치\t-Dbuiltin_xrootd=ON \\ # 빌트인 x11 기반 root\t-Droofit=ON \\ # roofit\t-Dpythia6=ON \\\t-Dpythia8=ON \\\t-Dmathmore=ON \\\t-Dpython=OFF \\ # pythia8 ON (선택사항1), pythia6 ON (필수사항), mathmore ON (필수사항:GENIE 가 요구함)\t../root_srccmake --build . --target install -- -j N # N 은 장비의 스레드 수cd /root/root_install/binsource thisroot.shcd /root\nROOT Integrated commandcd /root &amp;&amp; \\mkdir root_build &amp;&amp; \\mkdir root_install &amp;&amp; \\git clone https://github.com/root-project/root.git root_src &amp;&amp; \\cd /root/root_src &amp;&amp; \\git checkout v6-30-08 &amp;&amp; \\cd /root/root_build &amp;&amp; \\cmake \\\t-DCMAKE_INSTALL_PREFIX=/root/root_install \\\t-DPYTHIA6_LIBRARY=/root/pythia6/libPythia6.so \\\t-DPYTHIA8_INCLUDE_DIR=/root/pythia8/include \\\t-DPYTHIA8_LIBRARY=/root/pythia8/lib/libpythia8.so \\\t-DGSL_DIR=/usr/local \\\t-Dbuiltin_xrootd=ON \\\t-Droofit=ON \\\t-Dpythia6=ON \\\t-Dpythia8=ON \\\t-Dmathmore=ON \\\t-Dpython=OFF \\\t../root_src &amp;&amp; \\cmake --build . --target install -- -j 100 &amp;&amp; \\cd /root/root_install/bin &amp;&amp; \\source thisroot.sh &amp;&amp; \\cd /root\nGENIE - Version 3.04.021 과 2 에서 GENIE 설치에 요구되는 요구사항을 전부 설치하였으며이 단계에서는 본인의 연구에 필요한 최소한의 요소로 변수를 제거하고 설치하였음을 미리 밝히는 바이다.앞서 설치한 요구사항을 GENIE 에서 제대로 인식하기 위해서 환경변수를 설정해 주어야 하는데상기 단계를 그대로 따라왔다면 3.1. 의 echo 로 시작하는 명령줄이 이를 자동으로 진행해 줄 것이다.\n내려받기, 압축 해제 환경 변수 설정mkdir /root/GENIEgit clone https://github.com/GENIE-MC/Generator.git GENIE_Generatorcd /root/GENIE_Generatorgit checkout R-3_04_02echo -e &#x27;export GENIE=/root/GENIE_Generator\\nexport ROOTSYS=/root/root_install\\nexport LOG4CPP=/root/log4cpp\\nexport LHAPATH=/root/lhapdf\\nexport PYTHIA6=/root/pythia6\\nexport PATH=/lib:$PATH:$ROOTSYS/bin:$GENIE/bin\\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$LOG4CPP/lib:/lib:/usr/lib/x86_64-linux-gnu:/lib/x86_64-linux-gnu:$LHAPATH/lib:$PYTHIA6:$ROOTSYS/lib:$GENIE/lib&#x27; &gt;&gt; /root/.zshrcsource /root/.zshrc\n빌드 및 정리./configure \\\t--prefix=/root/GENIE \\ # GENIE 의 설치 경로\t--with-lhapdf6-inc=/root/lhapdf/include \\ # lhapdf 헤더 경로\t--with-lhapdf6-lib=/root/lhapdf/lib \\ # lhapdf 라이브러리 경로\t--with-libxml2-inc=/usr/include/libxml2 \\ # libxml2  헤더 경로 : apt 외의 수단으로 설치할 경우 달라질 수 있음\t--with-libxml2-lib=/lib/x86_64-linux-gnu \\ # libxml2 라이브러리 경로 : apt 외의 수단으로 설치할 경우 달라질 수 있음\t--with-log4cpp-inc=/root/log4cpp/include \\ # log4cpp 헤더 경로\t--with-log4cpp-lib=/root/log4cpp/lib \\ # log4cpp 라이브러리 경로\t--with-pythia6-lib=/root/pythia6 \\ # pythia6 라이브러리 경로\t--with-gfortran-lib=/lib/x86_64-linux-gnu \\ # gfortran 라이브러리 경로\t--disable-lhapdf5 \\\t--enable-lhapdf6 \\\t--enable-gfortran # lhapdf5 말고 lhapdf6 사용, gfortran 사용make -j N # N 은 장비의 스레드 수make install\nGENIE integrated commandmkdir /root/GENIE &amp;&amp; \\git clone https://github.com/GENIE-MC/Generator.git GENIE_Generator &amp;&amp; \\cd /root/GENIE_Generator &amp;&amp; \\git checkout R-3_04_02 &amp;&amp; \\echo -e &#x27;export GENIE=/root/GENIE_Generator\\nexport ROOTSYS=/root/root_install\\nexport LOG4CPP=/root/log4cpp\\nexport LHAPATH=/root/lhapdf\\nexport PYTHIA6=/root/pythia6\\nexport PYTHIA8=/root/pythia8\\nexport PATH=/lib:$PATH:$ROOTSYS/bin:$GENIE/bin\\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$LOG4CPP/lib:/lib:/usr/lib/x86_64-linux-gnu:/lib/x86_64-linux-gnu:$LHAPATH/lib:$PYTHIA6:$PYTHIA8/lib:$ROOTSYS/lib:$GENIE/lib&#x27; &gt;&gt; /root/.zshrc &amp;&amp; \\source /root/.zshrc &amp;&amp; \\./configure \\\t--prefix=/root/GENIE \\\t--with-lhapdf6-inc=/root/lhapdf/include \\\t--with-lhapdf6-lib=/root/lhapdf/lib \\\t--with-libxml2-inc=/usr/include/libxml2 \\\t--with-libxml2-lib=/lib/x86_64-linux-gnu \\\t--with-log4cpp-inc=/root/log4cpp/include \\\t--with-log4cpp-lib=/root/log4cpp/lib \\\t--with-pythia6-lib=/root/pythia6 \\\t--with-pythia8-lib=/root/pythia8/lib \\\t--with-gfortran-lib=/lib/x86_64-linux-gnu \\\t--disable-lhapdf5 \\\t--enable-lhapdf6 \\\t--disable-pythia6 \\\t--enable-pythia8 \\\t--enable-gfortran &amp;&amp; \\make -j 100 &amp;&amp; \\make install\ntestgevgen_hadron -n 10000 -p 211 -t 1000080160 -k 0.2 —seed 9839389\ntest 를 제외한 위 모든 과정을 한 번에 실행하는 코드cd /root &amp;&amp; \\mkdir /root/lhapdf &amp;&amp; \\wget https://lhapdf.hepforge.org/downloads/LHAPDF-6.5.4.tar.gz &amp;&amp; \\tar xvf LHAPDF-6.5.4.tar.gz &amp;&amp; \\cd /root/LHAPDF-6.5.4 &amp;&amp; \\./configure \\\t--prefix=/root/lhapdf \\\t--disable-python &amp;&amp; \\make -j 100 &amp;&amp; \\ # N = 100 인 경우make install &amp;&amp; \\cd /root &amp;&amp; \\rm -rf LHAPDF* &amp;&amp; \\mkdir /root/log4cpp &amp;&amp; \\mkdir /root/log4cpp_src &amp;&amp; \\cd /root &amp;&amp; \\wget &#x27;https://sourceforge.net/projects/log4cpp/files/log4cpp-1.1.x (new)/log4cpp-1.1/log4cpp-1.1.5rc1.tar.gz&#x27; &amp;&amp; \\tar -xvf log4cpp-1.1.5rc1.tar.gz -C /root/log4cpp_src --strip-components=2 &amp;&amp; \\cd log4cpp_src &amp;&amp; \\./configure --prefix=/root/log4cpp &amp;&amp; \\make -j 100 &amp;&amp; \\make install &amp;&amp; \\cd /root &amp;&amp; \\rm -rf log4cpp_* log4cpp-* &amp;&amp; \\wget https://root.cern.ch/download/pythia6.tar.gz &amp;&amp; \\tar zxvf pythia6.tar.gz &amp;&amp; \\wget https://www.pythia.org/download/pythia6/pythia6428.f &amp;&amp; \\mv pythia6428.f pythia6/pythia6428.f &amp;&amp; \\rm pythia6/pythia6416.f &amp;&amp; \\cd /root/pythia6 &amp;&amp; \\sed -i &#x27;52,60s/^/extern /;62s/^/extern /;64,65s/^/extern /;69s/^/extern /;72s/^/extern /&#x27; /root/pythia6/pythia6_common_address.c &amp;&amp; \\./makePythia6.linuxx8664 -j 100 &amp;&amp; \\cd /root &amp;&amp; \\rm pythia6.tar.gz &amp;&amp; \\wget https://www.pythia.org/download/pythia83/pythia8312.tgz &amp;&amp; \\mkdir /root/pythia8 &amp;&amp; \\tar xvf pythia8312.tgz &amp;&amp; \\cd /root/pythia8312 &amp;&amp; \\./configure --prefix=/root/pythia8 &amp;&amp; \\make -j 100 &amp;&amp; \\make install &amp;&amp; \\cd /root &amp;&amp; \\rm -rf pythia8312* &amp;&amp; \\mkdir /root/gsl &amp;&amp; \\wget https://mirror.ibcp.fr/pub/gnu/gsl/gsl-latest.tar.gz &amp;&amp; \\tar xvf gsl-latest.tar.gz &amp;&amp; \\cd /root/gsl-2.8 &amp;&amp; \\./configure --prefix=/root/gsl &amp;&amp; \\make -j 100 &amp;&amp; \\make install &amp;&amp; \\cd /root &amp;&amp; \\rm -rf gsl-2.8 gsl-latest.tar.gz &amp;&amp; \\cd /root &amp;&amp; \\mkdir root_build &amp;&amp; \\mkdir root_install &amp;&amp; \\git clone https://github.com/root-project/root.git root_src &amp;&amp; \\cd /root/root_src &amp;&amp; \\git checkout v6-30-08 &amp;&amp; \\cd /root/root_build &amp;&amp; \\cmake \\\t-DCMAKE_INSTALL_PREFIX=/root/root_install \\\t-DPYTHIA6_LIBRARY=/root/pythia6/libPythia6.so \\\t-DPYTHIA8_INCLUDE_DIR=/root/pythia8/include \\\t-DPYTHIA8_LIBRARY=/root/pythia8/lib/libpythia8.so \\\t-DGSL_DIR=/usr/local \\\t-Dbuiltin_xrootd=ON \\\t-Droofit=ON \\\t-Dpythia6=ON \\\t-Dpythia8=ON \\\t-Dmathmore=ON \\\t-Dpython=OFF \\\t../root_src &amp;&amp; \\cmake --build . --target install -- -j 100 &amp;&amp; \\cd /root/root_install/bin &amp;&amp; \\source thisroot.sh &amp;&amp; \\cd /root &amp;&amp; \\mkdir /root/GENIE &amp;&amp; \\git clone https://github.com/GENIE-MC/Generator.git GENIE_Generator &amp;&amp; \\cd /root/GENIE_Generator &amp;&amp; \\git checkout R-3_04_02 &amp;&amp; \\echo -e &#x27;export GENIE=/root/GENIE_Generator\\nexport ROOTSYS=/root/root_install\\nexport LOG4CPP=/root/log4cpp\\nexport LHAPATH=/root/lhapdf\\nexport PYTHIA6=/root/pythia6\\nexport PATH=/lib:$PATH:$ROOTSYS/bin:$GENIE/bin\\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$LOG4CPP/lib:/lib:/usr/lib/x86_64-linux-gnu:/lib/x86_64-linux-gnu:$LHAPATH/lib:$PYTHIA6:$ROOTSYS/lib:$GENIE/lib&#x27; &gt;&gt; /root/.zshrc &amp;&amp; \\source /root/.zshrc &amp;&amp; \\./configure \\\t--prefix=/root/GENIE \\\t--with-lhapdf6-inc=/root/lhapdf/include \\\t--with-lhapdf6-lib=/root/lhapdf/lib \\\t--with-libxml2-inc=/usr/include/libxml2 \\\t--with-libxml2-lib=/lib/x86_64-linux-gnu \\\t--with-log4cpp-inc=/root/log4cpp/include \\\t--with-log4cpp-lib=/root/log4cpp/lib \\\t--with-pythia6-lib=/root/pythia6 \\\t--with-gfortran-lib=/lib/x86_64-linux-gnu \\\t--disable-lhapdf5 \\\t--enable-lhapdf6 \\\t--enable-gfortran &amp;&amp; \\make -j 100 &amp;&amp; \\make install &amp;&amp; \\echo &#x27;INSTALL COMPELETE&#x27;\n","categories":["Research"]},{"title":"PVE 9.0.11 환경에서 nvidia 드라이버 설치 및 lxc 에 gpu 공유 설정","url":"/2024/07/24/PVE%209.0/","content":"PVE 9.0.11 환경에서 nvidia 삽질기참고 문헌\nProxmox LXC에 Nvidia GPU 패스쓰루: https://svrforum.com/os/503310\n예전에 이 글을 보고 따라간 적이 있었는데 몇몇 부분에서 보충이 필요한 부분이 있어 찾아가면서 했던 경험이 있다. 당시에 글로 남길까 했는데 그 때는 일단 진행해놓고 보자는 생각으로 지나왔더니 까먹고 글을 안 썼더랬다. 그 때의 업보인가 똑같은 짓을 다시 할 필요가 생겨서 이번에는 두 번 실수하지 않으리라 결심하고 글을 쓴다. \n버전 목록PVE 9.0.11NVIDIA 드라이버 버전 : NVIDIA-Linux-x86_64-580.105.08\n0. 사전 설정proxmox 를 처음 설치한 경우, enterprise repository 가 기본 레포지토리로 설정되어있다.이 때 apt update 를 수행하면 우리는 enterprise repository 가 구독되어 있지 않으므로 일부 레포지토리를 불러오지 못한다.따라서 이 문제를 해결하려면 repository 를 no subcription repository 로 수정해 주어야 한다.이는 pve(proxmox virtual environment) 의 커널을 최신 버전으로 업데이트하고 nvidia driver 설치를 진행하게 되는데 이를 위해선 proxmox 쪽 repository 를 올바르게 불러와야하기 때문이다.이 문제를 해결한 사용자는 다음 섹션으로 바로 넘어가도 좋다.\npve.proxmox.com/wiki 의 package repositories 항목에서 no subcription repository 항목에 들어가보면 apt 에서 불러오는 repository 의 수정 방법이 적혀 있다. pve 9.0.11 버전 외에서의 설정 방법은 위 링크를 참조하도록 하자.\n\n나는 nano 보다 vim 이 편해서 일단 apt update 로 업데이트 한 번 하고 (proxmox enterprise repo 를 못 불러오는거지 다른 repo 는 불러올 수 있다.) vim 깔아서 다음 두 파일을 수정했다.\n/etc/apt/source.list.d/proxmox.sources/etc/apt/source.list.d/ceph.sources\nproxmox.sources 의 경우 원래 파일 이름이 proxmox-enterprise.sources 이렇게 되어있을 수 있는데 mv 로 이름 바꾸고 수정해도 문제 없다.\n9.0.11 버전 기준으로 proxmox.sources 의 파일 내용은 다음과 같을 것인데\nTypes: debURIs: https://enterprise.proxmox.com/debian/pveSuites: trixieComponents: pve-enterpriseSigned-By: /usr/share/keyrings/proxmox-archive-keyring.gpg\n원 파일 내용을 주석처리하고 다음과 같이 저장하고 나오도록 하자.\n# Types: deb# URIs: https://enterprise.proxmox.com/debian/pve# Suites: trixie# Components: pve-enterprise# Signed-By: /usr/share/keyrings/proxmox-archive-keyring.gpgTypes: debURIs: http://download.proxmox.com/debian/pveSuites: trixieComponents: pve-no-subscriptionSigned-By: /usr/share/keyrings/proxmox-archive-keyring.gpg\nceph.sources 도 마찬가지로\nTypes: debURIs: https://enterprise.proxmox.com/debian/ceph-squidSuites: trixieComponents: enterpriseSigned-By: /usr/share/keyrings/proxmox-archive-keyring.gpg\n이런 내용일텐데\n# Types: deb# URIs: https://enterprise.proxmox.com/debian/ceph-squid# Suites: trixie# Components: enterprise# Signed-By: /usr/share/keyrings/proxmox-archive-keyring.gpgTypes: debURIs: http://download.proxmox.com/debian/ceph-squidSuites: trixieComponents: no-subscriptionSigned-By: /usr/share/keyrings/proxmox-archive-keyring.gpg\n이렇게 바꿔주도록 하자.이후 apt update 를 수행하면 pve 쪽 repository 도 잘 불러올 것이다.\n1. proxmox 커널 버전 확인 및 업데이트pve 의 쉘에서 다음을 통해 pve 커널의 버전을 확인한다.\nuname -r\n![fig2][/attachment/img/9_fig2.png]\n내 경우는 6.14.11-4 버전이다.최신 버전의 커널인지 확인하기 위해 다음을 수행한다.\napt-cache search pve-header\n![fig3][/attachment/img/9_fig3.png]\n최신 버전의 커널을 찾아 apt install 로 설치해준다. 내 경우는 6.17.2-1-pve 일 것이다.\napt install proxmox-headers-xxx-pve\n2. pve 쉘에서 GPU 드라이버 블랙리스트 설정설치가 완료되면  다음은 nvidia 드라이버를 설치해야 하는데 그 전에 proxmox 쉘에서 GPU 를 쓰면 곤란하니 \n/etc/modprobe.d/blacklist.conf\n파일을 vim 으로 열어서\nblacklist nouveau\n를 입력한 후 저장한 뒤 다음 명령어로 초기 램 파일 시스템을 업데이트하고 재부팅한다.\nupdate-initramfs -ureboot\n3. signing 을 위한 key-pair 생성이 부분은 4. 를 시도해보고\n![fig8][/attachment/img/9_fig8.png]\n이러한 문구가 뜨는 경우 필요할 수 있다. (뜨지 않는다면 스킵해도 무방하다.)\n서버 환경에서 UEFI secure boot 가 설정되어 있다면 드라이버 설치 중 커널 모듈에 signing 을 강제하는 경우가 있다. secure boot 를 끄면 install without signing 을 선택할 수 있으리라 생각된다. 내 경우는 그럴 상황은 못 되니 key-pair 를 생성해서 signing 을 진행할 것이다.\n4. Nvidia 드라이버 설치드라이버 빌드를 위한 기본 build-essential 을 apt 로 설치한다.\napt install build-essential\nnvidia 드라이버 다운로드 사이트 에서 본인의 gpu 모델에 맞는 드라이버를 찾는다.\n![fig4][/attachment/img/9_fig4.png]\nFind 를 누르면 최신 버전의 드라이버가 뜨는데 거기서 view  를 누르면\n![fig5][/attachment/img/9_fig5.png]\n이렇게 다운로드 링크가 나오는데 저걸 바로 받는 것이 아니고 오른쪽 마우스 버튼을 눌러 링크를 복사한 뒤 쉘로 돌아가 wget 으로 pve 에 받는다.\nwget 복사한_링크\n받은 파일에 실행 권한을 주기 위해 다음 명령어를 입력한다.\nchmod +x 받은_파일_이름\n이후 설치를 위해 ./받은파일이름 명령을 입력해주면 되는데 내 환경에서는 kernel_path 를 지정해주지 않으면 드라이버 설치 파일이 커널을 못잡는 오류가 있었다. 따라서 —kernel-source-path 옵션을 주어야 한다.\n./받은_파일_이름 --kernel-source-path=/usr/src/linux-headers-x.xx.x-x.pve\n내 경우엔 앞에 apt 로 설치한 kernel 이 저 위치에 있었다.\n![fig5][/attachment/img/9_fig6.png]\nMIT/GPL 선택 후 \n![fig5][/attachment/img/9_fig7.png]\nKernel module 을 빌드한다\n![fig5][/attachment/img/9_fig9.png]\nX 를 쓰겠냐는 말인데 여기선 no 를 선택한다.\n설치가 완료되었다는 박스가 뜨면 nvidia-smi 명령어를 통해 gpu 가 제대로 설치되었는지 확인할 수 있다.\nnvidia-smi\n![fig5][/attachment/img/9_fig10.png]이렇게 설치된 gpu 의 정보가 나오면 성공이다.\n이제 proxmox  가 시작될 때 nvidia 관련 드라이버가 실행되기 위해 필요한 작업으로, nvidia 관련 드라이버들을 모듈에 추가한다. 다음 파일을 vim 으로 연다\n/etc/modules-load.d/modules.conf\n파일에 다음 줄들을 추가한다\nnvidia  nvidia-modeset  nvidia_uvm\n![fig5][/attachment/img/9_fig11.png]\n이런 꼴이 될 것이다.initramfs 를 다시 한 번 업데이트한다.\nupdate-initramfs -u\n","categories":["Research"],"tags":["subtitle_works"]},{"title":"밀크티 레시피","url":"/2024/07/04/%EB%B0%80%ED%81%AC%ED%8B%B0%20%EB%A0%88%EC%8B%9C%ED%94%BC/","content":"No. 1\n우유 140 ml, 전자렌지에 1 분 가열\n홍차 105 ml, Starbucks Teavana English Breakfast 티백 하나 (3.4 g)\n설탕 1 큰술  \\pm  0.5 큰술 (질량으로 수정 예정.)\n우유 맛이 좀 더 우세, 설탕은 적당\n\nNo. 4\n우유 150  ml, 밀크팬에 약불로 2 분 (온도계로 쟀을 때 65~70 °C 정도가 되면 된다)\n홍차 150 ml, Ronnefeldt Assam 티백 둘 (3.0 g), 100 °C 5 분\n설탕 2 큰술\n좋은 밸런스의 맛\n\n그 외\n홍차 잎이나 우유의 종류에 따라 취향에 맞는 레시피가 다 다를 수 있다.\n보통은 홍차를 평소에 음용할 때 사용하는 잎 질량의 두 배를 사용해서 우린 뒤 우유 : 홍차 = 1 : 1 (부피) 의 비율에서 시작해서 맛을 보면서 레시피를 찾아가면 편하다.\n\n","categories":["Recipe","milk tea"]},{"title":"체르노빌 원전 사고 직전 원자로 제어 컴퓨터 SKALA 기록","url":"/2024/07/24/%EC%B2%B4%EB%A5%B4%EB%85%B8%EB%B9%8C%20%EC%9B%90%EC%A0%84%20%EC%82%AC%EA%B3%A0%20%EC%A7%81%EC%A0%84%20%EC%9B%90%EC%9E%90%EB%A1%9C%20%EC%A0%9C%EC%96%B4%20%EC%BB%B4%ED%93%A8%ED%84%B0%20SKALA%20%EA%B8%B0%EB%A1%9D/","content":"","categories":["잡담"],"tags":["subtitle_works"]},{"title":"영장 카나리아 (Warrant Canary)","url":"/2024/09/04/%EC%98%81%EC%9E%A5%20%EC%B9%B4%EB%82%98%EB%A6%AC%EC%95%84%20(Warrant%20Canary)/","content":"작성중\n","categories":["잡담"],"tags":["security"]},{"title":"추가 예정 기능","url":"/2024/07/04/%EC%B6%94%EA%B0%80%20%EC%98%88%EC%A0%95%20%EA%B8%B0%EB%8A%A5/","content":"- 댓글 기능 : disqus 로 구현 예정 &lt;&lt; 추가 완료\n- 테마 손보기\n- 기타 미세조정\n- 다른 카테고리, 메뉴 만들기\n- 글 옆에 코멘트 개수 표시??\n\n방문자 통계 &lt;&lt; 추가 완료\n\n","categories":["Announcement"]}]